{
  "name": "pcf-splunk-input",
  "tagline": "Configure Cloud Foundry Logregator input for Splunk",
  "body": "### Logging with PCF and Splunk.\r\nDetailed instructions based on [Cloud Foundry documentation](https://docs.cloudfoundry.org/devguide/services/integrate-splunk.html).\r\n\r\n#### Download and build [docker image of Splunk](https://github.com/outcoldman/docker-splunk).\r\n```bash\r\ngit clone https://github.com/outcoldman/docker-splunk.git\r\ncd docker-splunk/splunk\r\ndocker build --tag=\"$USER/splunk\" .\r\n```\r\n\r\n#### Start specifying web ui, and communication ports.\r\n```bash\r\ndocker run --hostname splunk -p 8000:8000 -p 9997:9997 -d --env SPLUNK_START_ARGS=\"--accept-license --answer-yes --no-prompt\" ashumilov/splunk:6.4.3\r\n\r\ndocker exec ec1dd23d6c26 entrypoint.sh splunk enable listen 9997 -auth admin:pwd\r\n```\r\n\r\n#### Download [RFC5424 Syslog Technology Add-On](https://splunkbase.splunk.com/app/978/).\r\nInstall, following instructions [here](http://docs.splunk.com/Documentation/AddOns/released/Overview/Singleserverinstall).\r\n\r\n#### Setup a new TCP Local Input.\r\nSpecify a port for the input - 9997 for example.\r\nSpecify a Source Type as rfc5424_syslog from the dropdown.\r\n\r\n#### Create and bind a syslog User Provided Service.\r\n```bash\r\ncf create-user-provided-service splunk-logger -l syslog://192.168.99.100:9997\r\ncf bind-service cd-demo-music splunk-logger\r\ncf restage cd-demo-music\r\n```\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}